name: http-cli-factory
version: "0.0.1"
author: Vinicius <senna.vmd@gmail.com>
about: Builts CLI binaries for HTTP APIs
base_endpoint: https://gitlab.com/api/v4
headers:
    Private-Token: "{{env.GITLAB_TOKEN}}"
args:
    - config:
        short: c
        long: config
        value_name: FILE
        help: Sets a custom config file
        takes_value: true
    - verbose:
        short: v
        multiple: true
        help: Sets the level of verbosity
subcommands:
    - show:
        path: /projects/{{env.PROJECT_ID}}/issues/{{args.ISSUE_ID}}
        args:
            - ISSUE_ID:
                help: Id of the issue to show
                required: true
                index: 1
        template: issue
    - project:
        path: /projects/{{env.PROJECT_ID}}
    - issues:
        args:
            - param:
                short: p
                help: query params
                long: param
                takes_value: true
                multiple: true
        path: /projects/{{env.PROJECT_ID}}/issues
    - move:
        template: issue
        args:
            - ISSUE_ID:
                help: Id of the issue to move
                required: true
                index: 1
            - BOARD:
                help: Board to move to (label name)
                required: true
                index: 2
        path: /projects/{{env.PROJECT_ID}}/issues/{{args.ISSUE_ID}}
        method: PUT
        body:
            labels: "{{ args.BOARD }}"
            state_event: "{%- if args.BOARD == 'Closed' -%}close{%- else -%}reopen{%- endif -%}"
    - boards:
        path: /projects/{{env.PROJECT_ID}}/boards
        args:
            - param:
                short: p
                help: query params
                long: param
                takes_value: true
                multiple: true
